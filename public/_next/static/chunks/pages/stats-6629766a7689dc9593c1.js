(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[368],{1397:function(e,t,s){"use strict";s.d(t,{TL:function(){return n},CG:function(){return a}});s(7757);var r=s(9226);var n=function(){return(0,r.I0)()},a=r.v9},8069:function(e,t,s){"use strict";s.d(t,{Z:function(){return N}});var r=s(5893),n=s(7757),a=s.n(n),i=s(2137),l=s(5419),c=s(4960),o=s(428),u=s(1276),d=s(1397),h=s(6215),f=s(1664),x=s(1163),m=s(4184),p=s.n(m);function g(e){var t=e.number,s=p()("absolute top-0 right-0 flex items-center justify-center p-2  translate-x-1/4 -translate-y-1/3 sm:translate-x-1/2 sm:-translate-y-1/3 bg-red-500 rounded-lg text-sm sm:text-base z-10",{"w-7 h-6 sm:w-9 sm:h-8":t>99},{"w-6 h-6 sm:w-7 sm:h-7":t<=99});return(0,r.jsx)(r.Fragment,{children:t>0&&(0,r.jsx)("div",{className:s,children:t>99?"99+":t})})}var b=s(155);function v(e){var t=e.children,s=e.isSelected,n=void 0!==s&&s,a=e.path,i=e.tooltip,l=void 0===i?"":i;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(f.default,{href:a,passHref:!0,children:(0,r.jsxs)("a",{className:"relative group mb-2",children:[n&&(0,r.jsx)("span",{className:"absolute top-0 left-0 block w-1 h-full bg-yellow-primary xs:w-2 rounded-r-md"}),l&&(0,r.jsx)("div",{className:"absolute hidden translate-x-4 -translate-y-1/2 left-full top-1/2 group-hover:block group-focus-visible:block",tabIndex:-1,children:(0,r.jsxs)("span",{className:"relative block px-5 py-1 text-white rounded-md bg-trueGray-700",children:[(0,r.jsx)("span",{className:"absolute left-0 w-0 h-0 -translate-x-2 -translate-y-1/2 border border-t-8 border-b-8 border-transparent top-1/2",style:{borderRight:"8px solid  #404040"}}),l]})}),(0,r.jsx)("button",{className:"w-full transition-all duration-300 ease-in-out h-14 text-trueGray-700 active:bg-gray-100/70",tabIndex:-1,children:t})]})})})}var j=s(2972),y=s(9669),w=s.n(y);function N(e){var t=e.shoppingListButtonDisabled,s=void 0!==t&&t,n=e.sideDrawerHandler,m=(0,x.useRouter)(),p=(0,d.CG)(h.wY),y=function(){var e=(0,i.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w().post("/api/auth/logout");case 3:e.sent,m.push("/login"),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return(0,r.jsxs)("aside",{className:"fixed top-0 left-0 flex flex-col items-center justify-between h-screen py-4 bg-white shadow-lg w-14 sm:w-20",children:[(0,r.jsx)(f.default,{href:"/",passHref:!0,children:(0,r.jsx)("a",{className:"w-12 sm:w-14",children:(0,r.jsx)("img",{src:"/img/logo.svg",alt:"logo"})})}),(0,r.jsxs)("div",{className:"flex flex-col justify-between w-full",children:[(0,r.jsx)(v,{isSelected:"/"===m.asPath,path:"/",tooltip:"Items",children:(0,r.jsx)(c.Z,{fontSize:"large"})}),(0,r.jsx)(v,{isSelected:"/history"===m.asPath,path:"/history",tooltip:"History",children:(0,r.jsx)(o.Z,{fontSize:"large"})}),(0,r.jsx)(v,{isSelected:"/stats"===m.asPath,path:"/stats",tooltip:"Statistics",children:(0,r.jsx)(l.Z,{fontSize:"large"})}),(0,r.jsxs)(b.Z,{className:"relative w-full group",onClick:function(e){return y()},children:[(0,r.jsx)("div",{className:"absolute hidden translate-x-4 -translate-y-1/2 left-full top-1/2 group-hover:block group-focus-visible:block",children:(0,r.jsxs)("span",{className:"relative block px-5 py-1 text-white rounded-md bg-trueGray-700",children:[(0,r.jsx)("span",{className:"absolute left-0 w-0 h-0 -translate-x-2 -translate-y-1/2 border border-t-8 border-b-8 border-transparent top-1/2",style:{borderRight:"8px solid  #404040"}}),"Logout"]})}),(0,r.jsx)("div",{className:"flex items-center justify-center w-full transition-all duration-300 ease-in-out h-14 text-trueGray-700 active:bg-gray-100/70",children:(0,r.jsx)(j.Z,{fontSize:"large"})})]})]}),(0,r.jsxs)(b.Z,{className:"relative w-12 h-12 text-white rounded-full sm:h-14 sm:w-14 focus-visible:ring-2 focus-visible:ring-black/90 focus-visible:ring-offset-2 ",onClick:n,color:"orange",disabled:s,children:[(0,r.jsx)(g,{number:p}),(0,r.jsx)("span",{className:"sm:hidden",children:(0,r.jsx)(u.Z,{})}),(0,r.jsx)("span",{className:"hidden sm:block",children:(0,r.jsx)(u.Z,{style:{fontSize:30}})})]})]})}},155:function(e,t,s){"use strict";var r=s(6156),n=s(5893),a=s(1253),i=s(4184),l=s.n(i),c=s(5477);function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){(0,r.Z)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}t.Z=function(e){var t=e.children,s=e.className,r=e.link,i=e.color,o=e.leftIcon,d=e.rightIcon,h=e.align,f=void 0===h?"center":h,x=e.justify,m=void 0===x?"center":x,p=e.block,g=void 0!==p&&p,b=e.loading,v=void 0!==b&&b,j=(0,a.Z)(e,["children","className","link","color","leftIcon","rightIcon","align","justify","block","loading"]),y=l()({"inline-flex":!g},{block:g},"items-".concat(f," justify-").concat(m," font-semibold transition-all duration-200 ease-in-out disabled:cursor-not-allowed disabled:bg-gray-300 disabled:hover:bg-gray-300"),s),w=l()(y,"hover:bg-gray-200/50 active:bg-gray-200/80 focus:bg-gray-200/50"),N=l()(y,"bg-red-500/95 hover:bg-red-500/80 active:bg-red-600/90 active:text-opacity-90 focus:ring focus:ring-red-200"),k=l()(y,"bg-yellow-primary/95 hover:bg-yellow-primary/80 active:bg-yellow-600/80 active:text-opacity-90 focus:ring focus:ring-yellow-100"),Z=l()(y,"bg-lightBlue-400 hover:bg-lightBlue-400/90 active:bg-lightBlue-500/80 active:text-opacity-90 focus:ring focus:ring-lightBlue-100");return(0,n.jsxs)("button",u(u({className:function(){if(r)return w;switch(i){case"red":return N;case"orange":return k;case"blue":return Z;default:return y}}()},j),{},{children:[v&&(0,n.jsx)("span",{className:"flex items-center mr-2",children:(0,n.jsx)(c.Z,{classes:{circle:"text-white"},size:15})}),!v&&o&&(0,n.jsx)("span",{className:"mr-2",children:o}),t,!v&&d&&(0,n.jsx)("span",{className:"ml-2",children:d})]}))}},1679:function(e,t,s){"use strict";s.d(t,{Z:function(){return u}});var r=s(7757),n=s.n(r),a=s(2137),i=s(7294),l=s(1163),c=s(9669),o=s.n(c);function u(){var e=(0,i.useState)(!0),t=e[0],s=e[1],r=(0,i.useState)(null),c=r[0],u=r[1],d=(0,l.useRouter)();return(0,i.useEffect)((function(){return(0,a.Z)(n().mark((function e(){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o().post("/api/auth/");case 3:t=e.sent,u(t.data.user),s(!1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),d.push("/login");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))(),function(){}}),[]),{user:c,isLoading:t}}},1008:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return N}});var r=s(5893),n=s(7757),a=s.n(n),i=s(2137),l=s(7294),c=s(8069);function o(e){var t=e.children;return(0,r.jsxs)("div",{className:"w-full min-h-screen",children:[(0,r.jsx)(c.Z,{sideDrawerHandler:function(){},shoppingListButtonDisabled:!0}),(0,r.jsx)("main",{className:"px-5 ml-14 sm:ml-20 bg-gray-50 min-h-screen",children:t})]})}var u=s(9669),d=s.n(u),h=s(5477);function f(e){var t=e.className,s=e.text,n=e.percentage,a=e.progressColor,i=void 0===a?"bg-blue-500":a;return(0,r.jsxs)("div",{className:"".concat(t," w-full"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"font-medium",children:s}),(0,r.jsxs)("span",{className:"text-lg font-medium",children:[n,"%"]})]}),(0,r.jsx)("div",{className:"w-full h-2 mt-2 bg-gray-200 rounded-md","aria-valuenow":n,"aria-roledescription":"progress bar","aria-valuemax":100,"aria-valuemin":0,children:(0,r.jsx)("div",{className:"w-5/12 h-full  ".concat(i," rounded-md"),style:{width:"".concat(n,"%")}})})]})}var x=s(1679),m=s(9009),p=s(557),g=s(1004),b=s(4195),v=s(3023),j=s(5358),y=s(9307),w=s(6830);function N(){var e=(0,l.useState)(null),t=e[0],s=e[1],n=(0,l.useState)(void 0),c=n[0],u=n[1],N=(0,l.useState)(!0),k=N[0],Z=N[1],O=(0,l.useState)(null),S=O[0],_=O[1],P=(0,x.Z)().isLoading;return(0,l.useEffect)((function(){return(0,i.Z)(a().mark((function e(){var t,r,n,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d().get("/api/shoppinglists/stats/top_products");case 3:t=e.sent,s(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),null!==(r=e.t0.response)&&void 0!==r&&null!==(n=r.data)&&void 0!==n&&null!==(i=n.error)&&void 0!==i&&i.message?_(e.t0.response.data.error.message):_("Failed to get data. Check your connection and try again");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))(),(0,i.Z)(a().mark((function e(){var t,s,r,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d().get("/api/shoppinglists/stats/chart");case 3:t=e.sent,u(t.data.stats),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),null!==(s=e.t0.response)&&void 0!==s&&null!==(r=s.data)&&void 0!==r&&null!==(n=r.error)&&void 0!==n&&n.message?_(e.t0.response.data.error.message):_("Failed to get data. Check your connection and try again");case 10:Z(!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))(),function(){}}),[]),k||P?(0,r.jsx)("div",{className:"flex items-center justify-center w-full h-screen",children:(0,r.jsx)(h.Z,{classes:{circle:"text-yellow-primary"}})}):(0,r.jsxs)(o,{children:[S&&(0,r.jsx)("div",{className:"flex items-center justify-center w-full h-screen",children:(0,r.jsx)("p",{className:"text-sm text-red-500/90",children:S})}),!S&&t&&c&&(0,r.jsxs)("div",{className:"px-3 pt-5",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-5 mb-10 md:grid-cols-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"mb-3 text-2xl font-semibold text-gray-800",children:"Top items"}),(0,r.jsx)("div",{className:"w-5/6",children:t.products.map((function(e){return(0,r.jsx)(f,{className:"mb-5",progressColor:"bg-yellow-primary",percentage:e.percentage,text:e.name},e._id)}))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"mb-3 text-2xl font-semibold text-gray-800",children:"Top categories"}),(0,r.jsx)("div",{className:"w-5/6",children:t.categories.map((function(e){return(0,r.jsx)(f,{className:"mb-5",progressColor:"bg-lightBlue-500",percentage:e.percentage,text:e.name},e._id)}))})]})]}),(0,r.jsxs)("div",{className:"lg:pr-16",children:[(0,r.jsx)("h2",{className:"mb-3 text-2xl font-semibold text-gray-800",children:"Monthly Summary"}),(0,r.jsx)(m.h,{width:"100%",height:300,children:(0,r.jsxs)(p.w,{data:c,margin:{left:-30},children:[(0,r.jsx)(g.x,{name:"items",type:"monotone",dataKey:"products",stroke:"#8884d8"}),(0,r.jsx)(b.q,{stroke:"#ccc"}),(0,r.jsx)(v.K,{dataKey:"month"}),(0,r.jsx)(j.B,{}),(0,r.jsx)(y.u,{}),(0,r.jsx)(w.D,{verticalAlign:"bottom",height:24})]})})]})]})]})}},1013:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/stats",function(){return s(1008)}])}},function(e){e.O(0,[624,521,222,774,888,179],(function(){return t=1013,e(e.s=t);var t}));var t=e.O();_N_E=t}]);